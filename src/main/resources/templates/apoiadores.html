<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/head :: common_head('Bem-vindo, Apoiador!')}"></head>

<body>
<div class="sticky-footer-layout">

    <div th:replace="~{fragments/header :: header}"></div>

    <main class="welcome-page-container">
        <div class="welcome-card">

            <div sec:authorize="isAuthenticated()">
                <h1 class="welcome-greeting">
                    Obrigado pelo seu apoio, <span th:text="${#authentication.principal.username}">Usuário</span>!
                </h1>
            </div>

            <p class="welcome-subtitle">
                Sua contribuição é fundamental para continuarmos nossa exploração dos maiores mistérios do universo. Agora, você faz parte do círculo interno de investigadores.
            </p>

            <div class="subscription-validity">
                <p>
                    Lembre-se: o acesso aos benefícios, como o grupo de WhatsApp e os episódios exclusivos, é válido enquanto sua assinatura estiver ativa.
                </p>

                <p th:if="${usuario.role.name() == 'ADMIN'}" class="validity-date">
                    <strong>Seu acesso como Administrador é permanente.</strong>
                </p>

                <p th:if="${usuario.role.name() == 'SUBSCRIBER' and usuario.acessoValidoAte != null}" class="validity-date">
                    <strong>Sua assinatura é válida até:
                        <span th:text="${#temporals.format(usuario.acessoValidoAte, 'dd/MM/yyyy')}">31/12/2025</span>
                    </strong>
                </p>
            </div>
            <hr class="welcome-divider">

            <div class="welcome-cta">
                <h2><i class="fab fa-whatsapp"></i> Acesso ao Grupo Secreto</h2>
                <p>Conecte-se com outros apoiadores, discuta teorias e receba novidades em primeira mão no nosso grupo exclusivo para membros.</p>
                <a href="https://chat.whatsapp.com/JnF3abEIx336wmD4M9s7Jy" target="_blank" class="btn btn-whatsapp">Entrar no Grupo</a>
            </div>

            <div class="welcome-cta">
                <h2><i class="fas fa-play-circle"></i> Explore os Arquivos</h2>
                <p>Todo o nosso acervo de episódios, incluindo o conteúdo exclusivo para assinantes, está liberado para você. Comece sua maratona agora mesmo.</p>
                <a th:href="@{/episodios}" class="btn btn-episodios">Acessar Episódios</a>
            </div>

        </div>
    </main>

    <div th:replace="~{fragments/footer :: footer}"></div>
</div>

<script th:src="@{/js/script.js}" defer></script>
</body>
</html>